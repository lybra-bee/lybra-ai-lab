---
layout: experiment
title: "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ –Ω–∞ P102-100"
date: 2025-10-12
status: in-progress
performance: "‚âà12 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∫–∞–¥—Ä 512x512, ‚âà15 —Å–µ–∫—É–Ω–¥ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ"
hardware: "NVIDIA P102-100 10GB + Xeon E5 2650v4"
description: "–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç –ø–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ —Å–æ —Å–º—ã—Å–ª–æ–º, 512x512, –∫–∞–¥—Ä –∑–∞ –∫–∞–¥—Ä–æ–º, –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∫–ª–∏–ø"
---

# üé¨ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ –Ω–∞ P102-100

–í —ç—Ç–æ–º —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–µ –º—ã —Å–æ–∑–¥–∞—ë–º –≤–∏–¥–µ–æ –¥–ª–∏–Ω–æ–π –æ–∫–æ–ª–æ 10 —Å–µ–∫—É–Ω–¥, —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º 512x512, —Å–æ —Å–º—ã—Å–ª–æ–º, –ø–æ–∫–∞–∑—ã–≤–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–∏–¥–µ–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python 3.10 –∏ pip
sudo apt install python3.10 python3.10-venv python3.10-dev -y

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python3.10 -m venv ~/video-gen/venv310
source ~/video-gen/venv310/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
pip install torch torchvision --index-url https://download.pytorch.org/whl/cu116
pip install diffusers transformers accelerate imageio tqdm
pip install ffmpeg-python
```

> üí° –î–ª—è —Ä–∞–±–æ—Ç—ã —Å CUDA 12.4 –∏ P102-100 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ PyTorch —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π GPU.

---

## üõ†Ô∏è –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–æ–¥–µ–ª–∏

–ò—Å–ø–æ–ª—å–∑—É–µ–º **Stable Diffusion v1.5**. –î–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ –∫–∞–¥—Ä –∑–∞ –∫–∞–¥—Ä–æ–º:

```python
import torch
from diffusers import StableDiffusionPipeline, DPMSolverMultistepScheduler

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–∏
pipe = StableDiffusionPipeline.from_pretrained(
    "runwayml/stable-diffusion-v1-5",
    torch_dtype=torch.float16
)

# –ü–æ–¥–∫–ª—é—á–∞–µ–º GPU
pipe.to("cuda")

# –ò—Å–ø–æ–ª—å–∑—É–µ–º DPM-Solver –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
pipe.scheduler = DPMSolverMultistepScheduler.from_config(pipe.scheduler.config)
```

---

## üé® –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ –∫–∞–¥—Ä –∑–∞ –∫–∞–¥—Ä–æ–º

–ß—Ç–æ–±—ã –æ–±–æ–π—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ GPU –ø–æ –ø–∞–º—è—Ç–∏, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º **–ø–æ –æ–¥–Ω–æ–º—É –∫–∞–¥—Ä—É**, –∑–∞—Ç–µ–º —Å–æ–±–∏—Ä–∞–µ–º –∏—Ö –≤ –≤–∏–¥–µ–æ:

```python
#!/usr/bin/env python3
import os
import torch
from diffusers import StableDiffusionPipeline, DPMSolverMultistepScheduler
from tqdm import tqdm
import imageio

# === –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ===
output_dir = "output_frames"
os.makedirs(output_dir, exist_ok=True)

prompt = "a futuristic city at sunset, flying cars, cinematic lighting, ultra realistic, masterpiece, 4k"
num_frames = 120  # ‚âà 10 —Å–µ–∫—É–Ω–¥ –ø—Ä–∏ 12 fps
width, height = 512, 512

# === –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–∏ ===
pipe = StableDiffusionPipeline.from_pretrained(
    "runwayml/stable-diffusion-v1-5",
    torch_dtype=torch.float16
).to("cuda")

pipe.scheduler = DPMSolverMultistepScheduler.from_config(pipe.scheduler.config)

# === –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞–¥—Ä–æ–≤ ===
for i in tqdm(range(num_frames), desc="Generating frames"):
    seed = 42 + i
    generator = torch.Generator("cuda").manual_seed(seed)
    image = pipe(prompt, width=width, height=height, num_inference_steps=25, generator=generator).images[0]
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–∞–¥—Ä
    image_path = os.path.join(output_dir, "frame_" + str(i).zfill(4) + ".png")
    image.save(image_path)

# === –°–±–æ—Ä–∫–∞ –≤–∏–¥–µ–æ ===
# –ö–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è –≤–º–µ—Å—Ç–æ f-string, —á—Ç–æ–±—ã Markdown –Ω–µ –æ–±—Ä—ã–≤–∞–ª –±–ª–æ–∫
ffmpeg_cmd = "ffmpeg -y -framerate 12 -i " + output_dir + "/frame_%04d.png -c:v libx264 -pix_fmt yuv420p video.mp4"
os.system(ffmpeg_cmd)

# ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
done_msg = "\u2705 –í–∏–¥–µ–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –∫–∞–∫ video.mp4"
print(done_msg)
```

---

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ–¥–Ω–æ–≥–æ –∫–∞–¥—Ä–∞ 512x512: **‚âà12 —Å–µ–∫—É–Ω–¥**  
- –ü–∞–º—è—Ç—å GPU: 9‚Äì9.5 GB –∑–∞–Ω—è—Ç–æ –∏–∑ 10 GB  
- –ó–∞–≥—Ä—É–∑–∫–∞ GPU: 95‚Äì100% –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞–¥—Ä–∞
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ GPU –∫–æ–ª–µ–±–ª–µ—Ç—Å—è –æ—Ç 60 –¥–æ 69 –≥—Ä–∞–¥—É—Å–æ–≤
- –í–∏–¥–µ–æ—Ä—è–¥: 12 fps, –æ–∫–æ–ª–æ 10 —Å–µ–∫—É–Ω–¥

---

## üñºÔ∏è –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–°–Ω–∞—á–∞–ª–∞ —Å–¥–µ–ª–∞–ª 5 –∫–∞–¥—Ä–æ–≤, –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞:

<video width="256" height="256" controls>
  <source src="{{ '/assets/videos/video1.mp4' | relative_url }}" type="video/mp4">
  –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–∏–¥–µ–æ.
</video>

–ó–∞—Ç–µ–º 250 –∫–∞–¥—Ä–æ–≤ –∏ —Å–æ–±—Ä–∞–ª –≤ –æ–¥–Ω–æ –≤–∏–¥–µ–æ:

<video width="256" height="256" controls>
  <source src="{{ '/assets/videos/video2.mp4' | relative_url }}" type="video/mp4">
  –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–∏–¥–µ–æ.
</video>


---

## üí° –í—ã–≤–æ–¥—ã

- P102-100 —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –≤–∏–¥–µ–æ –Ω–∞ 512x512 –ø–∏–∫—Å–µ–ª–µ–π, –µ—Å–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å **–∫–∞–¥—Ä –∑–∞ –∫–∞–¥—Ä–æ–º**.  
- –û–±—Ö–æ–¥ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–∞–º—è—Ç–∏ GPU –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫ `CUDA out of memory`.  
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ —Å–æ —Å–º—ã—Å–ª–æ–º –∏ –≤—ã—Å–æ–∫–æ–π –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –Ω–µ –ø–æ–ª—É—á–∏–ª–∞—Å—å, –ø–æ–ª—É—á–∏–ª—Å—è –Ω–∞–±–æ—Ä –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–∞–¥—Ä–æ–≤.  
- –ë—ã–ª–æ –º–∞–ª–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç, –º–æ–∂–µ—Ç –∏ –ø–æ–ª—É—á–∏–ª–æ—Å—å –±—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–æ–ª–∏–∫ —Å–æ —Å–º—ã—Å–ª–æ–º.
- –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–¥–æ–ª–∂—É —Å–≤–æ–∏ –∏–∑—ã—Å–∫–∞–Ω–∏—è, –≤ —Å–ª–µ–¥—É—é—â–∏–µ –≤—ã—Ö–æ–¥–Ω—ã–µ –ø–æ–ø—Ä–æ–±—É—é Stable Video Diffusion. 

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é **–ø–æ –∫–∞–¥—Ä—É** –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –∏–ª–∏ –¥–ª–∏–Ω–Ω–æ–≥–æ –≤–∏–¥–µ–æ.  
2. –î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –º–æ–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤ (`num_inference_steps`) –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ–Ω—å—à–∏–π CFG Scale.  
3. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å GPU —á–µ—Ä–µ–∑ `nvidia-smi` –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –∑–∞–≥—Ä—É–∑–∫–∏.  
4. –î–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤–∏–¥–µ–æ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 12 fps –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏.  

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ø–æ–ø—ã—Ç–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ Stable Video Diffusion.
